(this["webpackJsonpgames-frontend"]=this["webpackJsonpgames-frontend"]||[]).push([[0],{131:function(e,t,a){},132:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),s=a.n(r),o=a(7),i=(a(77),a(4)),j=a(30),l=a(29),u=a(71),b=(a(23),a(37),a(38),"CREATE_ROOM_SUCCESS");var d="JOIN_ROOM_SUCCESS";var m="SET_USERNAME";var O="UPDATE_CHAT_LOG";var g={room:null,chatLog:[],username:null};var h=a(67),p=a(68),f=Object(l.createStore)((function(e,t){if("undefined"===typeof e)return g;switch(t.type){case b:case d:e.room=t.payload;break;case m:e.username=t.username;break;case O:null!==e.room&&t.update.roomId===e.room.id&&(e.chatLog=[].concat(Object(u.a)(e.chatLog),[t.update.data]))}return e}),Object(p.composeWithDevTools)(Object(l.applyMiddleware)(h.a))),x=a(1);var w=function(e){return Object(x.jsx)("div",{className:"blog-item",children:Object(x.jsx)(o.b,{to:e.id,children:e.name})})},y=[{id:"categories",name:"Categories",url:"categories"},{id:"pictureguess",name:"Picture Guess",url:"picture-guess"}];var v=function(){return Object(x.jsxs)("div",{className:"blog-list",children:[Object(x.jsx)("div",{className:"about-message",children:Object(x.jsx)("p",{children:"Click an option below to start a game!"})}),y.map((function(e){return Object(x.jsx)(w,{id:e.id,name:e.name})}))]})};var C=function(){return Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)(o.b,{className:"header-item",to:"/",children:"Tom Davenport"}),Object(x.jsx)(o.b,{className:"header-item",to:"/",children:"Return to game list"})]})},I=a(2),S=a(11),D=a(42),k=a(133);function N(e,t){var a="categories-game-"+e,c=Object(n.useState)((function(){var e=localStorage.getItem(a);return"undefined"===e?"":null!=e?JSON.parse(e):"function"===typeof t?t():t})),r=Object(I.a)(c,2),s=r[0],o=r[1];return Object(n.useEffect)((function(){localStorage.setItem(a,JSON.stringify(s))}),[a,s]),[s,o]}var E=function(e,t){switch(t.type){case"REMOVE_ITEM":return Object(S.a)(Object(S.a)({},e),{},{list:e.list.filter((function(e){return e.key!==t.key}))});case"ADD_ITEM":return Object(S.a)(Object(S.a)({},e),{},{list:e.list.concat({name:t.name,key:t.key,answer:""})});case"UPDATE_ITEM":return Object(S.a)(Object(S.a)({},e),{},{list:e.list.map((function(e){return t.key===e.key?Object(S.a)(Object(S.a)({},e),{},{name:t.name}):e}))});case"RESET_LIST":return Object(S.a)(Object(S.a)({},e),{},{list:D});default:throw new Error}};function L(){return String.fromCharCode(65+Math.floor(26*Math.random()))}var T=function(){var e=Object(n.useState)(L()),t=Object(I.a)(e,2),a=t[0],c=t[1],r=Object(n.useReducer)(E,{list:D}),s=Object(I.a)(r,2),o=s[0],l=s[1],u=Object(n.useState)(!1),b=Object(I.a)(u,2),d=b[0],m=b[1],O=Object(n.useState)(!1),g=Object(I.a)(O,2),h=g[0],p=g[1],f=Object(i.f)(),w=(Object(j.b)(),N("gameID","")),y=Object(I.a)(w,2),v=y[0],C=y[1],S=N("userName",""),T=Object(I.a)(S,2),A=T[0],_=T[1],M=N("gameData",{}),R=Object(I.a)(M,2),P=(R[0],R[1]),J=N("playerData",{}),B=Object(I.a)(J,2),F=(B[0],B[1]),G=N("gameSessionID",""),U=Object(I.a)(G,2),V=U[0],W=U[1],z=N("userID",""),q=Object(I.a)(z,2),H=q[0],Y=q[1],$=N("returning",!1),K=Object(I.a)($,2),Q=K[0],X=K[1],Z=N("playerList",[]),ee=Object(I.a)(Z,2),te=(ee[0],ee[1]);return Object(n.useEffect)((function(){return P({categories:o.list,gameLetter:a})}),[o]),Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("p",{children:"A multiplayer game - find a word that starts with the following letter for each category!"}),Object(x.jsxs)("p",{children:["Letter to guess : ",Object(x.jsx)("span",{className:"gameLetter",id:"gameLetter",children:a})]}),Object(x.jsx)("button",{id:"newLetter",onClick:function(){!function(){var e=L();c(e),P({categories:o.list,gameLetter:e})}()},children:"Change letter"}),Object(x.jsx)("p",{children:"As the game leader, it's up to you to set the game up!"}),Object(x.jsx)("p",{children:"Click a category to change the name, or the button to remove it. "}),Object(x.jsx)("p",{children:"1. (Optional) Change or add more categories:"}),o.list.map((function(e){return Object(x.jsxs)("div",{className:"category",children:[Object(x.jsx)("input",{type:"text",id:e.key,defaultValue:e.name,onChange:function(e){return l({type:"UPDATE_ITEM",key:(t=e).target.id,name:t.target.value}),void P({categories:o.list,gameLetter:a});var t}}),Object(x.jsx)("button",{onClick:function(){return t=e.key,l({type:"REMOVE_ITEM",key:t}),void P({categories:o.list,gameLetter:a});var t},children:"Remove"})]})})),Object(x.jsx)("button",{type:"button",onClick:function(){return console.log("clicked handle"),l({type:"ADD_ITEM",key:Object(k.a)()}),void P({categories:o.list,gameLetter:a})},children:" Add category "}),Object(x.jsx)("button",{type:"button",onClick:function(){return console.log("clicked reset"),l({type:"RESET_LIST"}),void P({categories:o.list,gameLetter:a})},children:" Reset to default "}),Object(x.jsx)("p",{className:h?"showError":"hideError",children:"Please have at least one category before continuing."}),Object(x.jsx)("p",{children:"2. Enter your user name:"}),Object(x.jsx)("input",{type:"text",id:"username",placeholder:"Add username",onChange:function(e){!function(e){_(e.target.value);var t=H||Object(k.a)(),n=V||Object(k.a)(),c=v||(Math.floor(1e6*Math.random())+1e5).toString(),r=Q||!1;C(c),W(n),X(r),Y(t),te([{userID:H,userName:e.target.value,gameLeader:!0}]),F({userID:H,userName:e.target.value,gameLeader:!0}),P({categories:o.list,gameLetter:a})}(e)},value:A}),Object(x.jsx)("p",{className:d?"showError":"hideError",children:"Please enter a username before continuing."}),Object(x.jsx)("p",{children:"3. Click start game:"}),Object(x.jsx)("button",{className:"start-game",onClick:function(e){P({categories:o.list,gameLetter:a}),p(0===o.list.length),m(!A),0!==o.list.length&&A&&f.push({pathname:"/categories-waiting-room"})},children:"Start Game"})]})};var A=function(e){var t=Object(i.f)(),a=Object(n.useState)(!1),c=Object(I.a)(a,2),r=c[0],s=c[1],o=N("gameID",""),j=Object(I.a)(o,2),l=(j[0],j[1]),u=N("userName",""),b=Object(I.a)(u,2),d=b[0],m=b[1],O=N("userID",""),g=Object(I.a)(O,2),h=g[0],p=g[1],f=N("returning",""),w=Object(I.a)(f,2),y=w[0],v=w[1],C=N("playerData",{}),S=Object(I.a)(C,2),D=(S[0],S[1]),E=N("playerList",[]),L=Object(I.a)(E,2),T=(L[0],L[1]);return Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("h1",{children:"Join game"}),Object(x.jsx)("p",{children:"Enter a username:"}),Object(x.jsx)("input",{type:"text",id:"username",placeholder:"Add username",onChange:function(t){!function(t){m(t.target.value);var a=h||Object(k.a)(),n=y||!1,c=e.location.pathname.split("/").reverse()[0];l(c),v(n),p(a),T([{userID:h,userName:t.target.value}]),D({userID:h,userName:t.target.value})}(t)},value:d}),Object(x.jsx)("p",{className:r?"showError":"hideError",children:"Please enter a username before continuing."}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:function(){return s(!d),void(d&&t.push({pathname:"/categories-waiting-room"}))},children:"Join game"})]})},_=a(70),M=Object(_.io)("https://tom-games.azurewebsites.net/categories"),R=c.a.createContext(M);var P=function(e){var t=Object(n.useContext)(R),a=Object(n.useState)(""),c=Object(I.a)(a,2),r=c[0],s=c[1],o=Object(i.f)(),j=N("gameID"),l=Object(I.a)(j,2),u=l[0],b=(l[1],N("userName")),d=Object(I.a)(b,2),m=(d[0],d[1],N("gameData")),O=Object(I.a)(m,2),g=O[0],h=O[1],p=N("playerData"),f=Object(I.a)(p,2),w=f[0],y=(f[1],N("gameSessionID")),v=Object(I.a)(y,2),C=v[0],S=(v[1],N("userID")),D=Object(I.a)(S,2),k=(D[0],D[1],N("returning")),E=Object(I.a)(k,2),L=(E[0],E[1],N("playerList")),T=Object(I.a)(L,2),A=T[0],_=T[1],M=Object(n.useState)(!1),P=Object(I.a)(M,2),J=(P[0],P[1]),B=Object(n.useCallback)((function(){J(!0),console.log(!0)}),[]),F=Object(n.useCallback)((function(e){_(e.playerList),h(e.gameData)}),[]),G=Object(n.useCallback)((function(e){o.push({pathname:"/categories-game-room"})}),[]),U=Object(n.useCallback)((function(){console.log("START!"),t.emit("send-start",{gameID:u}),t.emit("start-timer",{gameID:u})}),[]);return Object(n.useEffect)((function(){return t.on("connect",(function(){console.log("connected categories")})),u&&(console.log("joining room"),t.emit("join",{gameID:u,playerData:w,gameSessionID:C,gameData:g})),t.on("joined-room",B),t.on("new-player",F),t.on("start-game",G),function(){t.off("joined-room",B),t.off("new-player",F),t.off("start-game",G)}}),[t,B,F,G]),Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("h1",{children:"Categories"}),Object(x.jsx)("h4",{children:"Waiting room"}),Object(x.jsx)("p",{children:"A multiplayer game - find a word that starts with the following letter for each category!"}),Object(x.jsxs)("p",{children:["Your game id is: ",Object(x.jsx)("span",{className:"gameID",children:u})]}),Object(x.jsx)("button",{onClick:function(e){!function(e){navigator.clipboard.writeText("https://tomd-ai.github.io/games-frontend#/join-categories/".concat(u)),e.target.focus(),s("Copied!")}(e)},children:"Click to copy direct link"}),Object(x.jsx)("p",{children:r}),Object(x.jsx)("p",{children:"Current players:"}),Object(x.jsx)("ol",{children:A.map((function(e){return Object(x.jsxs)("li",{className:"player",children:[e.userName,e.gameLeader?" (Game leader)":""]},e.userID)}))}),w.gameLeader&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"3. Click start game:"}),Object(x.jsx)("button",{className:"start-game",onClick:function(){U()},children:"Start Game"})]})]})};var J=function(e){var t=Object(i.f)(),a=Object(n.useContext)(R),c=N("gameID"),r=Object(I.a)(c,2),s=r[0],o=(r[1],N("userName")),j=Object(I.a)(o,2),l=j[0],u=(j[1],N("gameData")),b=Object(I.a)(u,2),d=b[0],m=(b[1],N("playerData")),O=Object(I.a)(m,2),g=(O[0],O[1],N("gameSessionID")),h=Object(I.a)(g,2),p=(h[0],h[1],N("userID")),f=Object(I.a)(p,2),w=f[0],y=(f[1],N("returning")),v=Object(I.a)(y,2),C=(v[0],v[1],N("playerList")),S=Object(I.a)(C,2),D=(S[0],S[1],Object(n.useState)("")),k=Object(I.a)(D,2),E=k[0],L=k[1],T=Object(n.useState)(""),A=Object(I.a)(T,2),_=A[0],M=A[1],P=Object(n.useState)(d.categories),J=Object(I.a)(P,2),B=J[0],F=J[1],G=Object(n.useState)(d.gameLetter),U=Object(I.a)(G,2),V=U[0],W=(U[1],Object(n.useState)(!1)),z=Object(I.a)(W,2),q=z[0],H=z[1],Y=Object(n.useCallback)((function(){console.log(" handle send answers"),H(!0),a.emit("send-answers",{gameID:s,userID:w,userName:l,answers:B,stopBus:!0}),t.push({pathname:"/categories-scoring"})}),[]),$=Object(n.useCallback)((function(e){L(e.minutes),M(e.seconds),0==e.minutes&&0==e.seconds&&K()}),[]),K=Object(n.useCallback)((function(){a.emit("send-answers",{gameID:s,userID:w,userName:l,answers:B,stopBus:!1}),t.push({pathname:"/categories-scoring"})}),[]);return Object(n.useEffect)((function(){return a.on("send-answers",K),a.on("timer-tick",$),a.on("end-game",K),function(){a.off("send-answers",K),a.off("timer-tick",$),a.off("end-game",K)}}),[a,K,$]),Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("h1",{children:"Let's play"}),Object(x.jsxs)("p",{children:["Time left: ",E?E.toString()+" minute":""," ",_?_.toString()+" seconds":"Game ended"]}),Object(x.jsx)("p",{children:"Enter something for each category that starts with:"}),Object(x.jsx)("p",{children:Object(x.jsx)("span",{className:"gameLetter",style:{fontSize:"55px"},children:V})}),Object(x.jsxs)("table",{style:{paddingBottom:"20px"},children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Category"}),Object(x.jsx)("th",{children:"Answer"}),Object(x.jsx)("th",{})]}),B.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.name}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",id:e.key,defaultValue:e.answer?e.answer:"",onChange:function(e){return function(e){var t,a=0;t=B.map((function(t){return e.target.id==t.key?(t.answer=e.target.value,a+=t.answer&&t.answer.charAt(0).toLowerCase()===V.toLowerCase()?1:0):t.answer&&(a+=t.answer&&t.answer.charAt(0).toLowerCase()===V.toLowerCase()?1:0),t})),a==B.length?H(!0):H(!1),F(t)}(e)}})}),Object(x.jsx)("td",{children:Object(x.jsxs)("p",{className:e.answer&&e.answer.charAt(0).toLowerCase()!==V.toLowerCase()?"showError":"hideError",children:["Category has to start with ",V,"!"]})})]})})),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("td",{children:q?Object(x.jsx)("button",{id:"stop",onClick:function(){return Y()},children:"Stop!"}):Object(x.jsx)(x.Fragment,{})}),Object(x.jsx)("td",{})]})]})]})};var B=function(e){var t=Object(i.f)(),a=Object(n.useContext)(R),c=N("gameID"),r=Object(I.a)(c,2),s=r[0],o=(r[1],N("userName")),j=Object(I.a)(o,2),l=(j[0],j[1],N("gameData")),u=Object(I.a)(l,2),b=u[0],d=(u[1],N("playerData")),m=Object(I.a)(d,2),O=m[0],g=(m[1],N("gameSessionID")),h=Object(I.a)(g,2),p=h[0],f=(h[1],N("userID")),w=Object(I.a)(f,2),y=(w[0],w[1],N("returning")),v=Object(I.a)(y,2),C=v[0],S=v[1],D=N("playerList"),k=Object(I.a)(D,2),E=(k[0],k[1],Object(n.useState)(b.categories)),L=Object(I.a)(E,2),T=L[0],A=(L[1],Object(n.useState)([])),_=Object(I.a)(A,2),M=_[0],P=_[1],J=Object(n.useState)([]),B=Object(I.a)(J,2),F=B[0],G=B[1],U=Object(n.useState)([]),V=Object(I.a)(U,2),W=V[0],z=V[1],q=Object(n.useCallback)((function(e){P(e)}),[]),H=Object(n.useCallback)((function(e){z(e.rowIds),G(e.userScores)}),[]),Y=Object(n.useCallback)((function(e,t,n){a.emit("mark-answer",{gameID:s,rowId:n,colInd:t,rowInd:e})}),[]),$=Object(n.useCallback)((function(){a.emit("request-new-game",{gameID:s}),console.log(C),C=S(!0),t.push({pathname:"/categories"})}),[]),K=Object(n.useCallback)((function(){S(!0),t.push({pathname:"/categories-waiting-room"})}),[]);return Object(n.useEffect)((function(){return console.log(M),0==M.length&&(console.log("doing this once"),a.emit("join",{gameID:s,playerData:O,gameSessionID:p,gameData:b}),a.emit("get-all-answers",{gameID:s})),a.on("get-answers",q),a.on("update-scores",H),a.on("start-new-game",K),function(){a.off("get-answers",q),a.off("update-scores",H),a.off("start-new-game",K)}}),[a,q,H,K]),Object(n.useEffect)((function(){console.log(M)}),[M]),Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("h1",{children:"Time to score!"}),Object(x.jsx)("p",{children:"The game leader will now mark the answers:"}),Object(x.jsxs)("table",{children:[Object(x.jsxs)("thead",{children:[Object(x.jsx)("th",{children:"Category"}),M.map((function(e){return Object(x.jsx)("th",{children:e.userName?e.userName:0})}))]}),Object(x.jsx)("tbody",{children:T.map((function(e,t){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.name}),M.map((function(e,a){return Object(x.jsx)("td",{id:"rowIndIS".concat(t.toString(),"ANDcolIndIS").concat(a.toString()),onClick:function(){O.gameLeader&&Y(a,t,"rowIndIS".concat(t.toString(),"ANDcolIndIS").concat(a.toString()))},className:W.includes("rowIndIS"+t.toString()+"ANDcolIndIS"+a.toString())?"accepted":"",children:e.answers[t].answer})}))]})}))}),Object(x.jsx)("tfoot",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Score"}),M.map((function(e,t){return Object(x.jsx)("th",{children:F.map((function(t){if(t.userID==e.userID)return t.score}))})}))]})})]}),O.gameLeader?Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Play again?"}),Object(x.jsx)("button",{onClick:function(){$()},children:"New game"})]}):Object(x.jsx)(x.Fragment,{})]})};var F=function(){return Object(x.jsxs)("div",{className:"project",children:[Object(x.jsx)("p",{children:"This is picture guess"}),Object(x.jsx)("p",{children:"TBC..."})]})};a(131);var G=function(){return Object(x.jsx)(j.a,{store:f,children:Object(x.jsx)(R.Provider,{value:M,children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("div",{className:"header",children:Object(x.jsx)(C,{})}),Object(x.jsx)("div",{className:"main-content",children:Object(x.jsxs)(i.c,{children:[Object(x.jsx)(i.a,{exact:!0,path:"/",component:v}),Object(x.jsx)(i.a,{path:"/categories",component:T}),Object(x.jsx)(i.a,{exact:!0,path:"/join-categories/:gameID",component:A}),Object(x.jsx)(i.a,{path:"/categories-waiting-room",component:P}),Object(x.jsx)(i.a,{path:"/categories-game-room",component:J}),Object(x.jsx)(i.a,{path:"/categories-scoring",component:B}),Object(x.jsx)(i.a,{path:"/picture-guess",component:F})]})})]})})})},U=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,134)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(o.a,{children:Object(x.jsx)(G,{})})}),document.getElementById("root")),U(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},42:function(e){e.exports=JSON.parse('[{"key":"_1","name":"Country","answer":""},{"key":"_2","name":"Capital city","answer":""},{"key":"_3","name":"Animal","answer":""},{"key":"_4","name":"Vegetable/Fruit","answer":""},{"key":"_5","name":"Movie name","answer":""},{"key":"_6","name":"Car brand","answer":""},{"key":"_7","name":"Singer/band","answer":""}]')},77:function(e,t,a){}},[[132,1,2]]]);
//# sourceMappingURL=main.fe3fe81d.chunk.js.map